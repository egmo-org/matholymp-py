<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Static site generation &#8212; matholymp 2025.12.0.dev0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=12dfc556" />
    <script src="../_static/documentation_options.js?v=4e8c6c69"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../genindex/" />
    <link rel="search" title="Search" href="../search/" />
    <link rel="next" title="Online registration" href="../online-registration/" />
    <link rel="prev" title="Roundup patches" href="../roundup-patches/" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="static-site-generation">
<span id="static-site"></span><h1>Static site generation<a class="headerlink" href="#static-site-generation" title="Link to this heading">¶</a></h1>
<p>Matholymp supports generating a static site with information about
past competitions.  This is done with the
<strong class="command">mo-static-generate</strong> script.  Before using this script, you
need to set up the directory that will contain the site.  This will
contain files <code class="file docutils literal notranslate"><span class="pre">staticsite.cfg</span></code> and <code class="file docutils literal notranslate"><span class="pre">page-template</span></code>, as
well as a directory <code class="file docutils literal notranslate"><span class="pre">data/</span></code> with the information about past
events.  Some parts of the site are not generated by this script and
need to be set up manually.</p>
<p><strong class="command">mo-static-generate</strong> currently expects there to have been at
least one past event.  Thus, if setting up a web presence for a new
competition, you should defer running <strong class="command">mo-static-generate</strong>
until after the first event (although other parts of the site can
still be set up).</p>
<p><strong class="command">mo-static-generate</strong> should be run from the directory
containing the site.  It reads the files listed above and generates
other files (overwriting them if they already exist).  It does not
delete files even if they were generated by a previous run of
<strong class="command">mo-static-generate</strong> and are no longer generated because of
changed data (in such cases, e.g., if the record for a person was
removed because they were not in fact at the event they were listed
at, the files must be removed manually).</p>
<section id="example-files">
<h2>Example files<a class="headerlink" href="#example-files" title="Link to this heading">¶</a></h2>
<p>The <code class="file docutils literal notranslate"><span class="pre">examples/static-site/</span></code> directory in the matholymp source
distribution includes versions of <a class="reference download internal" download="" href="../_downloads/42c40bbb30d0cd60fc642146d1f2d3e6/staticsite.cfg"><code class="xref download docutils literal notranslate"><span class="pre">staticsite.cfg</span></code></a> and <a class="reference download internal" download="" href="../_downloads/4665c96e38d0ab600a02530d0f7f59c2/page-template"><code class="xref download docutils literal notranslate"><span class="pre">page-template</span></code></a> that may be used as a basis
for configuring the generation of your site.</p>
<p>The example shows a site accessed over HTTPS, since this is a good
idea for the registration system, although all the data on the static
site itself is public.  It is expected that if both the static site
and the registration system are used, the registration system uses
URLs of the form <code class="samp docutils literal notranslate"><span class="pre">registration/</span><em><span class="pre">year</span></em><span class="pre">/</span></code> relative to the top of
the static site.</p>
</section>
<section id="site-design">
<h2>Site design<a class="headerlink" href="#site-design" title="Link to this heading">¶</a></h2>
<p>It is up to you to determine the visual design of your site and to set
up an appropriate HTML template, using appropriate CSS styles, that
implements this visual design.</p>
<p>If you wish, you can generate <code class="file docutils literal notranslate"><span class="pre">.html</span></code> files directly with
<strong class="command">mo-static-generate</strong> and put your complete HTML template
directly in the <code class="file docutils literal notranslate"><span class="pre">page-template</span></code> file.  Alternatively, you may
wish to use some external templating system to apply your design both
to the files generated by <strong class="command">mo-static-generate</strong> and to the
manually maintained parts of the site.  You could, for example,
configure <strong class="command">mo-static-generate</strong> to create <code class="file docutils literal notranslate"><span class="pre">.php</span></code> files
(using <code class="docutils literal notranslate"><span class="pre">page_suffix</span> <span class="pre">=</span> <span class="pre">.php</span></code> in <code class="file docutils literal notranslate"><span class="pre">staticsite.cfg</span></code>), with
<code class="file docutils literal notranslate"><span class="pre">page-template</span></code> containing the PHP boilerplate to include the
bulk of the page template from other files.  Or you could post-process
the files generated by <strong class="command">mo-static-generate</strong> rather than using
them directly on the website at all.</p>
<p>You may wish to put extra manually-maintained content on event pages,
such as links to regulations or solutions.  To support this,
<code class="file docutils literal notranslate"><span class="pre">staticsite.cfg</span></code> specifies <code class="docutils literal notranslate"><span class="pre">page_include_extra</span></code> as text that
goes on event pages to include such extra content; <code class="docutils literal notranslate"><span class="pre">%(dir)s</span></code> in that
text is replaced by the name of the directory for that event.  For
this to be useful, you need some templating system (possibly as
minimal as server-side includes, as shown in the example file) that
can include such extra content when encountering such text.
Similarly, <code class="docutils literal notranslate"><span class="pre">scoreboard_include_extra</span></code> is text that goes on
scoreboard pages; <code class="docutils literal notranslate"><span class="pre">%(dir)s</span></code> in that text is replaced by the name of
the directory for the event (not for the scoreboard itself).</p>
<p>Your page template should reference a stylesheet which provides styles
whose names are specified in <code class="file docutils literal notranslate"><span class="pre">staticsite.cfg</span></code> for various
constructs in the generated pages.  The <a class="reference external" href="https://www.egmo.org/egmo.css">corresponding styles used for
EGMO</a> may give a useful idea of some
possibilities, although of course you will need to make your styles
fit in with your overall site design.</p>
<p>Your page template, or a manually maintained page, should contain
links to the overall <code class="docutils literal notranslate"><span class="pre">countries/</span></code>, <code class="samp docutils literal notranslate"><em><span class="pre">event</span></em><span class="pre">s/</span></code> and <code class="docutils literal notranslate"><span class="pre">people/</span></code>
pages on the site.  You also need to create a front page to the site
manually.</p>
</section>
<section id="miscellaneous-generated-files">
<h2>Miscellaneous generated files<a class="headerlink" href="#miscellaneous-generated-files" title="Link to this heading">¶</a></h2>
<p><strong class="command">mo-static-generate</strong> generates some files that you may wish
to use in your site, but are not used automatically.  These are
generated in the <code class="file docutils literal notranslate"><em><span class="pre">event</span></em><span class="pre">/auto/</span></code> directory.</p>
<ul class="simple">
<li><p><code class="file docutils literal notranslate"><em><span class="pre">event</span></em><span class="pre">-contact-list</span><em><span class="pre">suffix</span></em></code> is an HTML fragment with
contact details for each event, which you may wish to include in
some manually-maintained page.</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">sidebar-</span><em><span class="pre">event</span></em><span class="pre">-list</span><em><span class="pre">suffix</span></em></code> is an HTML fragment listing
events in a form that may be suitable to include in a sidebar in
your page template.</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">redirects-</span><em><span class="pre">n</span></em></code> is a file listing redirection rules to
redirect accesses to the registration system for event <em>n</em> to the
corresponding pages on the static site, so that public URLs for
registration system pages continue to work after the registration
system is shut down.  These rules are in the format used by <a class="reference external" href="https://httpd.apache.org/docs/current/mod/mod_rewrite.html">Apache
mod_rewrite</a>,
which must thus be enabled in your Apache configuration if you wish
to use such redirects.  You will also need to set up Apache to use
these rules.</p></li>
</ul>
</section>
<section id="data-files">
<h2>Data files<a class="headerlink" href="#data-files" title="Link to this heading">¶</a></h2>
<p><strong class="command">mo-static-generate</strong> generates the site using data files in
the <code class="file docutils literal notranslate"><span class="pre">data/</span></code> directory.  These are UTF-8 CSV files starting with
a byte order mark.  The files for EGMO (<a class="reference external" href="https://www.egmo.org/data/egmos.csv">egmos.csv</a>, <a class="reference external" href="https://www.egmo.org/data/papers.csv">papers.csv</a>, <a class="reference external" href="https://www.egmo.org/data/countries.csv">countries.csv</a>, <a class="reference external" href="https://www.egmo.org/data/people.csv">people.csv</a>) may be useful in
illustrating the format.  The first file has a name that depends on
<code class="docutils literal notranslate"><span class="pre">short_name_url_plural</span></code> in <code class="file docutils literal notranslate"><span class="pre">staticsite.cfg</span></code>; the names of the
other files do not depend on the event.  The names of some columns in
these files depend on the settings of <code class="docutils literal notranslate"><span class="pre">num_key</span></code> and
<code class="docutils literal notranslate"><span class="pre">official_desc</span></code>.</p>
<p>The file <code class="file docutils literal notranslate"><em><span class="pre">event</span></em><span class="pre">s.csv</span></code> has to be maintained manually; this
means entering details of past events, entering details of new events
when announced and putting in medal boundaries after each event.  The
other files can be updated during and after each event by the scripts
<strong class="command">mo-static-papers-import</strong> and <strong class="command">mo-static-import</strong>, as
described below.</p>
<p>Some columns in <code class="file docutils literal notranslate"><em><span class="pre">event</span></em><span class="pre">s.csv</span></code> are optional, and are not present
in the example for EGMO but may be added if certain information varies
from event to event so cannot go in <code class="file docutils literal notranslate"><span class="pre">staticsite.cfg</span></code>.  A column
<code class="docutils literal notranslate"><span class="pre">Honourable</span> <span class="pre">Mentions</span> <span class="pre">Available</span></code> may be used to specify whether the
rules of a particular event allowed for Honourable Mentions to be
awarded; a column <code class="docutils literal notranslate"><span class="pre">Distinguish</span> <span class="pre">Official</span> <span class="pre">Countries</span></code> may be used to
indicate whether there was a distinction between official and
unofficial countries that should be reflected in the lists of
countries and results.  The <code class="docutils literal notranslate"><span class="pre">Age</span> <span class="pre">Day</span> <span class="pre">Description</span></code> column, present
for EGMO, is also optional.</p>
<p>Creating the other files initially, with details of past events, is
more complicated.  You may start with files simply containing the CSV
header row (with BOM).  That will suffice to add data for new events
using <strong class="command">mo-static-papers-import</strong> and
<strong class="command">mo-static-import</strong>.</p>
<p>To add data for past events, you need to put it into the correct
format for these CSV files (which includes identifying when the same
person or country was at more than one event and using that to
determine whether to assign new Person Number or Country Number
values); you also need to copy papers and any photos or flags into the
locations given in the relevant CSV columns.  Because this depends on
the form in which you have the data for past events, there is no
general solution to this.  You might have spreadsheets with data, in
which case it may be appropriate to convert those to CSV format and
then write your own Python script to convert that CSV file into
exactly the right format.  You might have web pages that need screen
scraping to extract the data from tables on those pages.  For older
events you might have data on paper that needs scanning and careful
proof-reading (in such a case, it would be a good idea to make the
scans available on the site as well, in case any questions arise about
possible mistakes).</p>
<p>It may well be convenient, when adding data for past events, to put it
in the format expected as input to <strong class="command">mo-static-import</strong> and
then use that script to deal with assigning person or country numbers.
This input format is almost the same as the format of the
<code class="file docutils literal notranslate"><span class="pre">countries.csv</span></code> and <code class="file docutils literal notranslate"><span class="pre">people.csv</span></code> files on the static site;
the script (<a class="reference download internal" download="" href="../_downloads/d13e3f053acc022d9de1d802d406ea04/mo_static_import.py"><code class="xref download docutils literal notranslate"><span class="pre">matholymp/scripts/mo_static_import.py</span></code></a>) should be examined for
the details of how the formats differ (in particular, the different
meanings of Person Number and Country Number in the input files).</p>
<p>Special prizes are represented in <code class="file docutils literal notranslate"><span class="pre">people.csv</span></code> by putting
<code class="docutils literal notranslate"><span class="pre">Special</span> <span class="pre">Prize</span></code> in the <code class="docutils literal notranslate"><span class="pre">Extra</span> <span class="pre">Awards</span></code> column.  If different types
of special prizes are distinguished, this column may give a name or
description of the prize (in general, it can contain a comma-separated
list of extra awards, formatted as if the single row of a CSV file).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Matholymp does not currently support results of past events with
partial information (such as total scores without scores on
individual problems, or names not matched to scores).  If you would
like to put up such partial results, please contact me so we can
work out how best to handle them.  There is no problem, however,
with putting up information where results of contestants are
present but details of leaders and staff are missing, and then
adding the details of those other people later when available.</p>
</div>
</section>
<section id="static-site-maintenance-tasks">
<h2>Static site maintenance tasks<a class="headerlink" href="#static-site-maintenance-tasks" title="Link to this heading">¶</a></h2>
<p>The following describes how to carry out various maintenance on the
static site.  In all cases, the directory where you run the listed
commands should be the top-level directory for the static site,
containing <code class="file docutils literal notranslate"><span class="pre">staticsite.cfg</span></code>.</p>
<section id="regeneration">
<h3>Regeneration<a class="headerlink" href="#regeneration" title="Link to this heading">¶</a></h3>
<p>To regenerate the site (needed after any change to the configuration
or data, including after following any of the instructions below for
other tasks):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mo</span><span class="o">-</span><span class="n">static</span><span class="o">-</span><span class="n">generate</span>
</pre></div>
</div>
</section>
<section id="when-registration-opens">
<h3>When registration opens<a class="headerlink" href="#when-registration-opens" title="Link to this heading">¶</a></h3>
<p>Ensure that the relevant event is described in <code class="file docutils literal notranslate"><em><span class="pre">event</span></em><span class="pre">s.csv</span></code>,
and list the number of the event in <code class="docutils literal notranslate"><span class="pre">event_active_number</span></code> in
<code class="file docutils literal notranslate"><span class="pre">staticsite.cfg</span></code>.</p>
</section>
<section id="adding-papers">
<h3>Adding papers<a class="headerlink" href="#adding-papers" title="Link to this heading">¶</a></h3>
<p>To add a particular day’s papers (day 1 in this example) to the site,
where <strong class="command">mo-document-generate</strong> was used to produce papers with
a logo on them, rather than papers being printed on paper with a
pre-printed background design:</p>
<pre class="literal-block">mo-static-papers-import --day 1 <em>input-directory</em></pre>
<p>where <em>input-directory</em> is the directory in which
<strong class="command">mo-document-generate</strong> was run to generate the papers, with
the <code class="file docutils literal notranslate"><span class="pre">data/</span></code> subdirectory containing its input CSV files and
<code class="file docutils literal notranslate"><span class="pre">out/</span></code> containing the output PDF files.  See
<a class="reference internal" href="../document-generation/#document-generation"><span class="std std-ref">Document generation</span></a> for details of the use of
<strong class="command">mo-document-generate</strong> to generate those files.</p>
<p>To add a particular day’s papers (day 2 in this example) to the site,
where papers were printed on paper with a pre-printed background
design, and both versions with and without that design are to be added
to the site:</p>
<pre class="literal-block">mo-static-papers-import --background --day 2 <em>input-directory</em></pre>
<p>In both cases, you may omit the <code class="samp docutils literal notranslate"><span class="pre">--day</span> <em><span class="pre">day</span></em></code> option if you are
adding all papers at the same time, and must omit it if there is only
one day at the competition.</p>
<p>If the papers being added to the website have corrections relative to
the versions used in the exam, you may wish to edit the Description
column in <code class="file docutils literal notranslate"><span class="pre">papers.csv</span></code> to note this.</p>
</section>
<section id="adding-data-after-an-event">
<h3>Adding data after an event<a class="headerlink" href="#adding-data-after-an-event" title="Link to this heading">¶</a></h3>
<p>This should be done once the final scores and medal boundaries have
been approved (and once any known corrections to participant names or
other public details have been entered in the registration system).
Ensure that the data for the relevant event in <code class="file docutils literal notranslate"><em><span class="pre">event</span></em><span class="pre">s.csv</span></code> is
complete, including the number of problems, the maximum number of
marks for each problem and the medal boundaries.  Choose a directory
(<em>input-directory</em> below) outside the website for
<strong class="command">mo-static-import</strong> to download files into.  Make sure that
<code class="docutils literal notranslate"><span class="pre">event_active_number</span></code> is set in <code class="file docutils literal notranslate"><span class="pre">staticsite.cfg</span></code>; that is
required for <strong class="command">mo-static-import</strong> to download files
automatically.  Then:</p>
<pre class="literal-block">mo-static-import <em>input-directory</em></pre>
<p>If this is the first event, at this point you should fill in Country
Number for the host country in <code class="file docutils literal notranslate"><em><span class="pre">event</span></em><span class="pre">s.csv</span></code> before
regenerating the site (the number not having been allocated before
then; this is the only reason it is not currently possible to use
<strong class="command">mo-static-generate</strong> before the first event).</p>
<p>If you wish to use the redirections from the registration system to
the static site, you may add them to your Apache configuration after
regenerating the site.  Before doing this, make sure that anyone using
the registration data administratively (e.g., to plan airport
connections for departures) has all the data they need from the site.</p>
<p>It is also possible to run <strong class="command">mo-static-import</strong> with files
downloaded manually from the registration system rather than having it
download them automatically.  To do so, download the following files
from the registration system (the lists of countries and people must
be downloaded while not logged in administratively), and put them in
the directory <em>input-directory</em>: the list of countries
(<code class="file docutils literal notranslate"><span class="pre">countries.csv</span></code>), the list of people (<code class="file docutils literal notranslate"><span class="pre">people.csv</span></code>), the
ZIP file of flags (<code class="file docutils literal notranslate"><span class="pre">flags.zip</span></code>), the ZIP file of participant
photos (<code class="file docutils literal notranslate"><span class="pre">photos.zip</span></code>), the RSS feed of scores (save it as
<code class="file docutils literal notranslate"><span class="pre">scores-rss.xml</span></code>).  (The ZIP files do not need to be unpacked;
if they are, the directories <code class="file docutils literal notranslate"><span class="pre">flags/</span></code> and <code class="file docutils literal notranslate"><span class="pre">photos/</span></code> will
be used instead of the ZIP files.)  Any files already present in that
directory will be used by <strong class="command">mo-static-import</strong> in preference to
downloading files automatically.</p>
</section>
<section id="removing-a-photo">
<h3>Removing a photo<a class="headerlink" href="#removing-a-photo" title="Link to this heading">¶</a></h3>
<p>If someone wants their photo removed from the static site, remove the
files from the relevant directory (note that there may be multiple
copies of it, for someone at multiple events, and thumbnail versions
that need to be removed as well) and remove the entry or
entries from the Photo URL column for that person in
<code class="file docutils literal notranslate"><span class="pre">people.csv</span></code>, before regenerating the site.</p>
</section>
<section id="removing-a-person-or-merging-two-people">
<h3>Removing a person or merging two people<a class="headerlink" href="#removing-a-person-or-merging-two-people" title="Link to this heading">¶</a></h3>
<p>If it turns out that a person’s record on the site (generally, or for
a particular event) should be removed because that person was not
present at the event they are listed at, or if there are multiple
person numbers assigned to a single person at different events, then
the relevant data needs editing directly.</p>
<p>To remove a person, delete the problem rows from <code class="file docutils literal notranslate"><span class="pre">people.csv</span></code>.
Remove any corresponding photos for the events that person was in fact
not at.  If the person was not at any event, remove their directory
under <code class="file docutils literal notranslate"><span class="pre">people/</span></code>.  Then regenerate the site.</p>
<p>To merge two (or more) records for a person, decide which person
number is to be canonical for that person.  Change any rows in
<code class="file docutils literal notranslate"><span class="pre">people.csv</span></code> with the noncanonical person numbers to use the
canonical number.  Move any photos from the directories with the
noncanonical numbers to the directory with the canonical number,
update the Photo URL columns accordingly and delete the noncanonical
directory.  Regenerate the site.  If you wish, also add redirects in
the web server configuration from the URLs of the removed directories
to the canonical directory.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the highest allocated person number is removed, a future use of
<strong class="command">mo-static-import</strong> will reallocate that number to another
person.  You can avoid this by temporarily creating a dummy entry
with that number in <code class="file docutils literal notranslate"><span class="pre">people.csv</span></code> before running
<strong class="command">mo-static-import</strong>, then removing that entry afterwards.
A future version of matholymp may provide a more automated way of
handling removing and merging people.</p>
</div>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../">matholymp</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro/">Introduction, prerequisites and downloads</a></li>
<li class="toctree-l1"><a class="reference internal" href="../roundup-patches/">Roundup patches</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Static site generation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#example-files">Example files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#site-design">Site design</a></li>
<li class="toctree-l2"><a class="reference internal" href="#miscellaneous-generated-files">Miscellaneous generated files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#data-files">Data files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#static-site-maintenance-tasks">Static site maintenance tasks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../online-registration/">Online registration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../document-generation/">Document generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/">Contributing to matholymp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes/">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../copying/">Copyright and license</a></li>
<li class="toctree-l1"><a class="reference internal" href="../thanks/">Thanks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../todo/">Matholymp todo list</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../">Documentation overview</a><ul>
      <li>Previous: <a href="../roundup-patches/" title="previous chapter">Roundup patches</a></li>
      <li>Next: <a href="../online-registration/" title="next chapter">Online registration</a></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search/" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2014-2025, Joseph Samuel Myers.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.1.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="../_sources/static-site.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>